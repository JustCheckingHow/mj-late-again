<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="class.css">

    <script>
        var player_x;
        var player_y;

        var local_x;
        var local_y;
        class Player {
            constructor(offset, velocity, w) {
                this.globalX = 50;
                this.globalY = 50;
                this.localX = 0;
                this.localY = 0;
                this.d = {};
                this.offset = offset;
                this.velocity = velocity;
                this.w = w
            }

            newv(v, a, b) {
                var n = parseInt(v, 10);
                if (this.d[a])
                    n -= this.velocity;
                if (this.d[b])
                    n += this.velocity;

                if (n < this.offset)
                    return this.offset;
                if (n > this.w + this.offset)
                    return this.w + this.offset;
                return n;
            }

            AddVelocity(val, dir) {
                if (dir == 0) {
                    var newX = this.newv(val, 37, 39);
                    this.globalX += newX - this.localX;
                    this.localX = newX;
                }
                if (dir == 1) {
                    var newY = this.newv(val, 38, 40);
                    this.globaly += newY - this.localY;
                    this.localY = newY;
                }
            }

            Move() {

            }
        }

        let player;
        window.onload = function () {
            var pane = $('#pane'),
                box = $('#box'),
                w = (pane.width() - box.width()) / 3,
                d = {},
                velocity = 3,
                offset = w / 3 * 2;

            player = new Player(offset, velocity, w);


            $(window).keydown(function (e) { player.d[e.which] = true; });
            $(window).keyup(function (e) { player.d[e.which] = false; });

            setInterval(function () {
                box.css({
                    left: function (i, v) {
                        player.AddVelocity(v, 0);
                        return player.localX;
                    },
                    top: function (i, v) {
                        player.AddVelocity(v, 1);
                        return player.localY;
                    }
                });
            }, 10);
        }
    </script>
</head>

<body>
    <div id="pane" class="my-auto mx-auto">
        <img id="box" src="img/0.jpg"></img>
    </div>
</body>

</html>